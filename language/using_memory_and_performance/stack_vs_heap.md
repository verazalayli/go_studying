## üß† –ü–æ—á–µ–º—É —Å—Ç–µ–∫ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ?

–ö–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ **–Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å—Ç–µ–∫–µ**, —ç—Ç–æ:

* **–¥–µ—à–µ–≤–ª–µ** –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è/–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è;
* **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç —É—á–∞—Å—Ç–∏—è GC**;
* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –ø–æ –≤—ã—Ö–æ–¥—É –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω—É–ª–µ–≤–æ–π overhead);
* **–Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏**.

---

## üí• –ß—Ç–æ –∑–Ω–∞—á–∏—Ç "–≤—ã—Ç–µ–∫–∞–µ—Ç –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏"?

–≠—Ç–æ –∫–æ–≥–¥–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ **–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é**, –∏–ª–∏ **–∑–∞–º—ã–∫–∞–µ—Ç—Å—è –≤–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏**, –∏ **–º–æ–∂–µ—Ç –∂–∏—Ç—å –¥–æ–ª—å—à–µ**, —á–µ–º —Å–∞–º–∞ —Ñ—É–Ω–∫—Ü–∏—è. –¢–æ–≥–¥–∞ Go –æ—Ç–ø—Ä–∞–≤–∏—Ç –µ—ë –≤ –∫—É—á—É:

```go
func stackAllocated() int {
    x := 42 // –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ —Å—Ç–µ–∫–µ
    return x
}

func heapAllocated() *int {
    x := 42 // —É–π–¥—ë—Ç –≤ heap ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º *x
    return &x
}
```

---

## ‚ùì –¢–æ–≥–¥–∞ —Ä–∞–∑–≤–µ –Ω–µ –ª—É—á—à–µ –≤—Å–µ–≥–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å?

–ù–µ –≤—Å–µ–≥–¥–∞. –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, **–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `struct` –±–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—è) –ø–æ–∑–≤–æ–ª—è–µ—Ç:

* –¥–µ—Ä–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ **—Å—Ç–µ–∫–µ**;
* –∏–∑–±–µ–∂–∞—Ç—å **GC**;
* —É—Å–∫–æ—Ä–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π.

–ù–æ **–≤—Å—ë –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**:

| –†–∞–∑–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã        | –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å (–∑–Ω–∞—á–µ–Ω–∏–µ) –≤—ã–≥–æ–¥–Ω–æ? | –ü–æ—á–µ–º—É                                                  |
| ----------------------- | ------------------------------ | ------------------------------------------------------- |
| –ú–∞–ª–µ–Ω—å–∫–∞—è (`<=64 –±–∞–π—Ç`) | ‚úÖ –î–∞                           | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±—ã—Å—Ç—Ä–æ, —Å—Ç–µ–∫ ‚Äî –¥–µ—à—ë–≤                        |
| –°—Ä–µ–¥–Ω—è—è (64‚Äì512 –±–∞–π—Ç)   | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç                     | –ò–Ω–æ–≥–¥–∞ –ª—É—á—à–µ —É–∫–∞–∑–∞—Ç–µ–ª—å (–µ—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–ª–æ–∂–µ–Ω–∞ –≥–ª—É–±–æ–∫–æ) |
| –ë–æ–ª—å—à–∞—è (`>512 –±–∞–π—Ç`)   | ‚ùå –ù–µ—Ç                          | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Ä–æ–∂–µ, –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é         |

---

## üß© –ü—Ä–∏–º–µ—Ä: —Ä–∞–±–æ—Ç–∞ —Å `User`

```go
type User struct {
    ID    int
    Name  string
    Email string
}

// 1. –ü–µ—Ä–µ–¥–∞—ë–º –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é
func processUser(u User) {
    // –≤—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞
}

// 2. –ü–µ—Ä–µ–¥–∞—ë–º –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é
func processUserPtr(u *User) {
    // —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –º–æ–∂–µ—Ç –ø–æ–ø–∞—Å—Ç—å –≤ heap
}
```

üëâ **–ï—Å–ª–∏ `User` ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–π**, –≤—ã–≥–æ–¥–Ω–µ–µ `processUser(u)`
üëâ **–ï—Å–ª–∏ `User` ‚Äî –±–æ–ª—å—à–æ–π**, –≤—ã–≥–æ–¥–Ω–µ–µ `processUserPtr(&u)`

---

## ‚úÖ –ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å: —É–∫–∞–∑–∞—Ç–µ–ª—å –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ?

| –í–æ–ø—Ä–æ—Å                              | –û—Ç–≤–µ—Ç                               |
| ----------------------------------- | ----------------------------------- |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∞–ª–µ–Ω—å–∫–∞—è –∏ –≤—Ä–µ–º–µ–Ω–Ω–∞—è?    | ‚û§ –ü–µ—Ä–µ–¥–∞–≤–∞–π **–ø–æ –∑–Ω–∞—á–µ–Ω–∏—é**         |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–æ–ª—å—à–∞—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, JSON)? | ‚û§ –ò—Å–ø–æ–ª—å–∑—É–π **—É–∫–∞–∑–∞—Ç–µ–ª—å**           |
| –ù—É–∂–Ω–æ –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ?            | ‚û§ –ò—Å–ø–æ–ª—å–∑—É–π **—É–∫–∞–∑–∞—Ç–µ–ª—å**           |
| –î–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—é—Ç—Å—è?             | ‚û§ –ú–æ–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å (–µ—Å–ª–∏ –Ω–µ —Ç—è–∂–µ–ª–æ) |

---

## üìå –í—ã–≤–æ–¥

* –°—Ç–µ–∫ = –±—ã—Å—Ç—Ä–æ, –¥—ë—à–µ–≤–æ, –±–µ–∑ GC.
* –ö—É—á–∞ = –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –Ω—É–∂–Ω–∞ –ø—Ä–∏ "—É—Ç–µ—á–∫–µ" –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏.
* –ù–µ **–≤—Å–µ–≥–¥–∞** —Å—Ç–æ–∏—Ç –∏–∑–±–µ–≥–∞—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª–µ–π ‚Äî **–∏–Ω–æ–≥–¥–∞ –æ–Ω–∏ –¥–µ—à–µ–≤–ª–µ, —á–µ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä**.
* –ì–ª–∞–≤–Ω–æ–µ ‚Äî **–∏–∑–º–µ—Ä—è—Ç—å –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞—Ç—å**.